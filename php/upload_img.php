<?php
/* base64 方法 */	
	// $base64_img = $_POST['data'];
	// // $base64_img = "data:image/jpeg;base64,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";
	// preg_match("/data\:image\/[^;]*/", $base64_img, $match);	
	// $type = substr($match[0], 11);
	// $tmp = str_replace('data:image/'.$type.';base64,', '', $base64_img);
	// $img = base64_decode($tmp);
	// //写文件
	// $src = "../images/upload/img.".$type;
	// file_put_contents($src, $img);
	
	// echo $src;

/* file  */	
	$fn = (isset($_SERVER['HTTP_X_FILENAME']) ? $_SERVER['HTTP_X_FILENAME'] : false);
	if ($fn) {
	    file_put_contents(
	        '../images/upload/' . $fn,
	        file_get_contents('php://input')
	    );
	    echo "../images/upload/$fn";
	    exit();
	}
?>